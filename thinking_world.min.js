"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var SearchBar=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=n.handleChange.bind(n),n.inputChange=n.inputChange.bind(n),n.setState={propStocked:0},n}return _inherits(t,React.Component),_createClass(t,[{key:"handleChange",value:function(e){1==e.target.checked?this.props.onStockChange(1):this.props.onStockChange(0)}},{key:"inputChange",value:function(e){this.props.onKeyword(e.target.value)}},{key:"render",value:function(){return React.createElement("div",{style:{border:"1px solid #00a2ff"}},React.createElement("input",{type:"text",placeholder:"Search....",onChange:this.inputChange}),React.createElement("br",null),React.createElement("input",{type:"checkbox",id:"stockF",name:"stockF",onChange:this.handleChange}),React.createElement("label",{htmlFor:"stockF",style:{color:"#00a2ff"}},"Only Show products in stock"))}}]),t}();function MockUpData(e){var t=e.mockuplist;return t.length<1?React.createElement("div",null,React.createElement("div",{className:"mockup-category"},e.category),React.createElement("div",{className:"mockup-list",style:{color:"#00ffaa"}}," No result.")):React.createElement("div",null,React.createElement("div",{className:"mockup-category"},e.category),t.map((function(e,t){return React.createElement("div",{className:"mockup-list",key:t},e)})))}function getHighlight(e,t,n){if("y"===n){for(var a=new RegExp(t,"gi"),r=void 0,c=void 0;null!==(r=a.exec(e));)c=r[0];return{__html:e.replace(a,"<span class='hightlight'>"+c+"</span>")}}return{__html:e}}function MockUpList(e){var t=new Array,n=new Array,a=new Array,r=1===e.stocked?"y":"n",c=e.keyword?"y":"n",o=e.keyword.toLowerCase().replace(/(\s*)/g,"");return e.dta.map((function(a,i){t.push(a.category);var l=a.name,s=l.toLowerCase().replace(/(\s*)/g,"");("y"!==r||"y"==r&&e.stocked==a.stocked)&&("n"===c||"y"===c&&1==s.includes(o))&&(l="y"===c&&1==s.includes(o)?getHighlight(a.name,o,"y"):getHighlight(a.name,o,"n"),n.push(React.createElement("div",{className:"mockup-dta",key:a.index,cate:a.category,stocked:a.stocked},React.createElement("div",{className:"mockup-title-name",dangerouslySetInnerHTML:l}),React.createElement("div",{className:"mockup-title-price"},a.price))))})),t=[].concat(_toConsumableArray(new Set(t))),React.createElement("div",null,t.map((function(e,t){return a=n.filter((function(t,n,a){return t.props.cate==e})),React.createElement(MockUpData,{key:t,category:e,mockuplist:a})})))}function MockUpBar(e){return React.createElement("div",{style:{border:"1px solid #00cf58",textAlign:"left",paddingLeft:"15px"}},e.children,React.createElement(MockUpList,{dta:e.dta,stocked:e.stocked,keyword:e.keyword}))}var MockUp=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.stockChange=n.stockChange.bind(n),n.keyword=n.keyword.bind(n),n.state={dta:"",propStocked:0,propKeyword:""},n}return _inherits(t,React.Component),_createClass(t,[{key:"stockChange",value:function(e){this.setState({propStocked:e})}},{key:"keyword",value:function(e){this.setState({propKeyword:e})}},{key:"componentDidMount",value:function(){var e=this,t=new Object;t.method="GET",t.headers={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},t.type="XML";!function(t,n){fetch(t,n).then((function(e){return e.json()})).then((function(t){e.setState({dta:t})})).catch((function(e){return console.log("error:",e)}))}("https://www.jswjake.space/tutorial/t2/api/think_mockup",t)}},{key:"render",value:function(){if(this.state.dta)return React.createElement("div",{style:{width:"250px",heihgt:"600px",margin:"50px auto 100px auto",textAlign:"center"}},React.createElement(SearchBar,{onStockChange:this.stockChange,onKeyword:this.keyword}),React.createElement(MockUpBar,{dta:this.state.dta,stocked:this.state.propStocked,keyword:this.state.propKeyword},React.createElement("div",{className:"mockup-title"},React.createElement("div",{className:"mockup-title-name"},"Name"),React.createElement("div",{className:"mockup-title-price"},"Price"))))}}]),t}();ReactDOM.createRoot(document.getElementById("thinking2")).render(React.createElement(MockUp,null));